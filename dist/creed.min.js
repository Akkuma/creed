!function(t,e){if("function"==typeof define&&define.amd)define("creed",["exports"],e);else if("undefined"!=typeof exports)e(exports);else{var n={exports:{}};e(n.exports),t.creed=n.exports}}(this,function(t){"use strict";function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return(t.state()&dt)>0}function o(t){return(t.state()&_t)>0}function i(t){return(t.state()&wt)>0}function u(t){return(t.state()&gt)>0}function c(t){return(t.state()&bt)>0}function s(t){return(t.state()&jt)>0}function f(t){var e=t.near();if(!o(e))throw new TypeError("getValue called on "+t);return e.value}function p(t){var e=t.near();if(!i(e))throw new TypeError("getReason called on "+t);return h(e),e.value}function h(t){t._runAction(At)}function a(t){t._state|=jt}function l(t){return kt?v(t):Tt?m(t):y(t)}function y(t){return function(){return setTimeout(t,0)}}function v(t){return function(){return process.nextTick(t)}}function m(t){var e=document.createTextNode("");new Tt(t).observe(e,{characterData:!0});var n=0;return function(){e.data=n^=1}}function d(t,e){try{_(e,t)}finally{e.length=0}}function _(t,e){for(var n=0;n<t.length;++n){var r=t[n];s(r)||e(r)}}function w(){return kt&&"function"==typeof process.emit?function(t,e){return t===Ot?process.emit(t,e.value,e):process.emit(t,e)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(t,e,n){var r;try{r=new n(Ot)instanceof n}catch(o){r=!1}return r?function(t,r){var o=new n(t,{detail:{reason:r.value,promise:r},bubbles:!1,cancelable:!0});return!e.dispatchEvent(o)}:t}(g,self,CustomEvent):g}function g(){}function b(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function j(t,e,n,r){return n._when(new St(t,e,r)),r}function A(t,e,n){return"function"!=typeof t?(n._become(e),!1):(k(t,e.value,n),!0)}function k(t,e,n){try{n._resolve(t(e))}catch(r){n._reject(r)}}function T(t,e,n){return e._when(new Mt(t,n)),n}function E(t,e,n){return e._when(new Nt(t,n)),n}function P(t,e,n){var r=t(e);if(!b(r)||"function"!=typeof r.then)throw new TypeError("f must return a promise");n._resolve(r)}function x(t){return Array.isArray(t)?new Array(t.length):[]}function R(t,e,n,r){var o=Array.isArray(n)?O:S;try{o(t,e,n,r)}catch(i){r._reject(i)}return r.near()}function O(t,e,n,r){for(var o=0;o<n.length;++o)M(t,e,n[o],o,r);e.complete(o,r)}function S(t,e,n,r){var o=0,i=!0,u=!1,c=void 0;try{for(var s,f=n[Symbol.iterator]();!(i=(s=f.next()).done);i=!0){var p=s.value;M(t,e,p,o++,r)}}catch(h){u=!0,c=h}finally{try{!i&&f["return"]&&f["return"]()}finally{if(u)throw c}}e.complete(o,r)}function M(t,e,n,r,u){if(!b(n))return void e.valueAt(n,r,u);var c=t(n);u._isResolved()?o(c)||h(c):o(c)?e.fulfillAt(c,r,u):i(c)?e.rejectAt(c,r,u):N(c,e,r,u)}function N(t,e,n,r){t._runAction({handler:e,i:n,promise:r,fulfilled:C,rejected:H})}function C(t){this.handler.fulfillAt(t,this.i,this.promise)}function H(t){return this.handler.rejectAt(t,this.i,this.promise)}function K(t){return I(t)?t.near():b(t)?L(D,t):new Ft(t)}function V(t){return new qt(t)}function W(){return new zt}function D(t){return new Ft(t)}function F(){var t=new Dt;return{resolve:function(e){return t._resolve(e)},promise:t}}function q(t){var e=new Ht(Bt,x(t));return G(e,t)}function z(t){return G(new Ct(W),t)}function B(t){return"object"==typeof t&&null!==t}function G(t,e){if(!B(e))return V(new TypeError("expected an iterable"));var n=new Dt;return R(J,t,e,n)}function I(t){return t instanceof Wt}function J(t){return I(t)?t.near():L(D,t)}function L(t,e){try{var n=e.then;return"function"==typeof n?Q(n,e):t(e)}catch(r){return new qt(r)}}function Q(t,e){var n=new Dt;try{t.call(e,function(t){return n._resolve(t)},function(t){return n._reject(t)})}catch(r){n._reject(r)}return n.near()}function U(){return new qt(new TypeError("resolution cycle"))}function X(t,e,n){return e._runAction(new It(t,n)),n}function Y(t,e){e._become(t)}function Z(t,e,n){var r=setTimeout($,t,n);return e._runAction(new Lt(r,n)),n}function $(t){t._reject(new Jt("promise timeout"))}function tt(t,e,n,r){function o(t){r._resolve(t)}function i(t){r._reject(t)}switch(n.length){case 0:t.call(e,o,i);break;case 1:t.call(e,n[0],o,i);break;case 2:t.call(e,n[0],n[1],o,i);break;case 3:t.call(e,n[0],n[1],n[2],o,i);break;default:n.push(o,i),t.apply(e,n)}return r}function et(t,e,n,r){function o(t,e){t?r._reject(t):r._fulfill(e)}switch(n.length){case 0:t.call(e,o);break;case 1:t.call(e,n[0],o);break;case 2:t.call(e,n[0],n[1],o);break;case 3:t.call(e,n[0],n[1],n[2],o);break;default:n.push(o),t.apply(e,n)}return r}function nt(t,e,n){return new Xt(t,e,n).run(),n}function rt(t){return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];return ot(t,this,n)}}function ot(t,e,n){var r=t.apply(e,n);return nt(K,r,new Dt)}function it(t){return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];return st(et,t,this,n,new Dt)}}function ut(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];return st(et,t,this,n,new Dt)}function ct(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];return st(tt,t,this,n,new Dt)}function st(t,e,n,r,o){vt(e);try{t(e,n,r,o)}catch(i){o._reject(i)}return o}function ft(t,e){var n=K(e);return 0>=t||i(n)||c(n)?n:X(t,n,new Dt)}function pt(t,e){var n=K(e);return u(n)?n:Z(t,n,new Dt)}function ht(t){return G(new Qt,t)}function at(t){var e=new Ut(K,x(t));return G(e,t)}function lt(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];return yt(t,this,n)}function yt(t,e,n){var r=new Ht(new Yt(t,e),x(n));return G(r,n)}function vt(t){if("function"!=typeof t)throw new TypeError("must provide a resolver function")}function mt(){var t="function"==typeof Promise&&Promise;return"undefined"!=typeof self?self.Promise=$t:"undefined"!=typeof global&&(global.Promise=$t),t}Object.defineProperty(t,"__esModule",{value:!0});var dt=1,_t=2,wt=4,gt=_t|wt,bt=8,jt=16,At={fulfilled:function(){},rejected:a},kt="undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process),Tt="function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver,Et=function(){function t(){var e=this;n(this,t),this.tasks=new Array(65536),this.length=0,this.drain=l(function(){return e._drain()})}return t.prototype.add=function(t){0===this.length&&this.drain(),this.tasks[this.length++]=t},t.prototype._drain=function(){for(var t=this.tasks,e=0;e<this.length;++e)t[e].run(),t[e]=void 0;this.length=0},t}(),Pt="unhandledRejection",xt="rejectionHandled",Rt=function(){function t(e,r){n(this,t),this.errors=[],this.emit=e,this.reportError=r}return t.prototype.track=function(t){this.emit(Pt,t,t.value)||(0===this.errors.length&&setTimeout(d,1,this.reportError,this.errors),this.errors.push(t))},t.prototype.untrack=function(t){h(t),this.emit(xt,t)},t}(),Ot="unhandledRejection",St=function(){function t(e,r,o){n(this,t),this.f=e,this.r=r,this.promise=o}return t.prototype.fulfilled=function(t){A(this.f,t,this.promise)},t.prototype.rejected=function(t){return A(this.r,t,this.promise)},t}(),Mt=function(){function t(e,r){n(this,t),this.f=e,this.promise=r}return t.prototype.fulfilled=function(t){try{var e=this.f;this.promise._fulfill(e(t.value))}catch(n){this.promise._reject(n)}},t.prototype.rejected=function(t){this.promise._become(t)},t}(),Nt=function(){function t(e,r){n(this,t),this.f=e,this.promise=r}return t.prototype.fulfilled=function(t){try{P(this.f,t.value,this.promise)}catch(e){this.promise._reject(e)}},t.prototype.rejected=function(t){this.promise._become(t)},t}(),Ct=function(){function t(e){n(this,t),this.never=e}return t.prototype.valueAt=function(t,e,n){n._fulfill(t)},t.prototype.fulfillAt=function(t,e,n){n._become(t)},t.prototype.rejectAt=function(t,e,n){n._become(t)},t.prototype.complete=function(t,e){0===t&&e._become(this.never())},t}(),Ht=function(){function t(e,r){n(this,t),this.pending=0,this.results=r,this.mergeHandler=e}return t.prototype.valueAt=function(t,e,n){this.results[e]=t,this.check(this.pending-1,n)},t.prototype.fulfillAt=function(t,e,n){this.valueAt(t.value,e,n)},t.prototype.rejectAt=function(t,e,n){n._become(t)},t.prototype.complete=function(t,e){this.check(this.pending+t,e)},t.prototype.check=function(t,e){this.pending=t,0===t&&this.mergeHandler.merge(e,this.results)},t}(),Kt=new Et,Vt=new Rt(w(),function(t){throw t.value}),Wt=function(){function t(){n(this,t)}return t.empty=function(){return W()},t.of=function(t){return D(t)},t}(),Dt=function(t){function r(){n(this,r),t.call(this),this.ref=void 0,this.action=void 0,this.length=0}return e(r,t),r.prototype.then=function(t,e){var n=this.near();return n===this?j(t,e,n,new r):n.then(t,e)},r.prototype["catch"]=function(t){var e=this.near();return e===this?j(void 0,t,e,new r):e["catch"](t)},r.prototype.map=function(t){var e=this.near();return e===this?T(t,e,new r):e.map(t)},r.prototype.ap=function(t){var e=this.near(),n=t.near();return e===this?this.chain(function(t){return n.map(t)}):e.ap(n)},r.prototype.chain=function(t){var e=this.near();return e===this?E(t,e,new r):e.chain(t)},r.prototype.concat=function(t){var e=this.near(),n=t.near();return u(e)||c(n)?e:u(n)||c(e)?n:z([e,n])},r.prototype.toString=function(){return"[object "+this.inspect()+"]"},r.prototype.inspect=function(){var t=this.near();return t===this?"Promise { pending }":t.inspect()},r.prototype.near=function(){return this._isResolved()?(this.ref=this.ref.near(),this.ref):this},r.prototype.state=function(){return this._isResolved()?this.ref.near().state():dt},r.prototype._isResolved=function(){return void 0!==this.ref},r.prototype._when=function(t){this._runAction(t)},r.prototype._runAction=function(t){void 0===this.action?this.action=t:this[this.length++]=t},r.prototype._resolve=function(t){this._become(K(t))},r.prototype._fulfill=function(t){this._become(new Ft(t))},r.prototype._reject=function(t){this._isResolved()||this.__become(new qt(t))},r.prototype._become=function(t){this._isResolved()||this.__become(t)},r.prototype.__become=function(t){this.ref=t===this?U():t,void 0!==this.action&&Kt.add(this)},r.prototype.run=function(){var t=this.ref.near();t._runAction(this.action),this.action=void 0;for(var e=0;e<this.length;++e)t._runAction(this[e]),this[e]=void 0},r}(Wt),Ft=function(t){function r(e){n(this,r),t.call(this),this.value=e}return e(r,t),r.prototype.then=function(t){return"function"==typeof t?j(t,void 0,this,new Dt):this},r.prototype["catch"]=function(){return this},r.prototype.map=function(t){return T(t,this,new Dt)},r.prototype.ap=function(t){return t.map(this.value)},r.prototype.chain=function(t){return E(t,this,new Dt)},r.prototype.concat=function(){return this},r.prototype.toString=function(){return"[object "+this.inspect()+"]"},r.prototype.inspect=function(){return"Promise { fulfilled: "+this.value+" }"},r.prototype.state=function(){return _t},r.prototype.near=function(){return this},r.prototype._when=function(t){Kt.add(new Gt(t,this))},r.prototype._runAction=function(t){t.fulfilled(this)},r}(Wt),qt=function(t){function r(e){n(this,r),t.call(this),this.value=e,this._state=wt,Vt.track(this)}return e(r,t),r.prototype.then=function(t,e){return"function"==typeof e?this["catch"](e):this},r.prototype["catch"]=function(t){return j(void 0,t,this,new Dt)},r.prototype.map=function(){return this},r.prototype.ap=function(){return this},r.prototype.chain=function(){return this},r.prototype.concat=function(){return this},r.prototype.toString=function(){return"[object "+this.inspect()+"]"},r.prototype.inspect=function(){return"Promise { rejected: "+this.value+" }"},r.prototype.state=function(){return this._state},r.prototype.near=function(){return this},r.prototype._when=function(t){Kt.add(new Gt(t,this))},r.prototype._runAction=function(t){t.rejected(this)&&Vt.untrack(this)},r}(Wt),zt=function(t){function r(){n(this,r),t.apply(this,arguments)}return e(r,t),r.prototype.then=function(){return this},r.prototype["catch"]=function(){return this},r.prototype.map=function(){return this},r.prototype.ap=function(){return this},r.prototype.chain=function(){return this},r.prototype.concat=function(t){return t},r.prototype.toString=function(){return"[object "+this.inspect()+"]"},r.prototype.inspect=function(){return"Promise { never }"},r.prototype.state=function(){return dt|bt},r.prototype.near=function(){return this},r.prototype._when=function(){},r.prototype._runAction=function(){},r}(Wt),Bt={merge:function(t,e){t._fulfill(e)}},Gt=function(){function t(e,r){n(this,t),this.action=e,this.promise=r}return t.prototype.run=function(){this.promise._runAction(this.action)},t}(),It=function(){function t(e,r){n(this,t),this.time=e,this.promise=r}return t.prototype.fulfilled=function(t){setTimeout(Y,this.time,t,this.promise)},t.prototype.rejected=function(t){this.promise._become(t)},t}(),Jt=function(t){function r(e){n(this,r),t.call(this),this.message=e,this.name=r.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}return e(r,t),r}(Error),Lt=function(){function t(e,r){n(this,t),this.timer=e,this.promise=r}return t.prototype.fulfilled=function(t){clearTimeout(this.timer),this.promise._become(t)},t.prototype.rejected=function(t){return clearTimeout(this.timer),this.promise._become(t),!1},t}(),Qt=function(){function t(){n(this,t),this.pending=0}return t.prototype.valueAt=function(t,e,n){n._fulfill(t)},t.prototype.fulfillAt=function(t,e,n){n._become(t)},t.prototype.rejectAt=function(t,e,n){h(t),this.check(this.pending-1,n)},t.prototype.complete=function(t,e){this.check(this.pending+t,e)},t.prototype.check=function(t,e){this.pending=t,0===t&&e._reject(new RangeError("No fulfilled promises in input"))},t}(),Ut=function(){function t(e,r){n(this,t),this.pending=0,this.results=r,this.resolve=e}return t.prototype.valueAt=function(t,e,n){this.settleAt(this.resolve(t),e,n)},t.prototype.fulfillAt=function(t,e,n){this.settleAt(t,e,n)},t.prototype.rejectAt=function(t,e,n){h(t),this.settleAt(t,e,n)},t.prototype.settleAt=function(t,e,n){this.results[e]=t,this.check(this.pending-1,n)},t.prototype.complete=function(t,e){this.check(this.pending+t,e)},t.prototype.check=function(t,e){this.pending=t,0===t&&e._fulfill(this.results)},t}(),Xt=function(){function t(e,r,o){n(this,t),this.resolve=e,this.iterator=r,this.promise=o}return t.prototype.run=function(){this.step(this.iterator.next,void 0)},t.prototype.step=function(t,e){try{this.handle(t.call(this.iterator,e))}catch(n){this.promise._reject(n)}},t.prototype.handle=function(t){return t.done?this.promise._resolve(t.value):void this.resolve(t.value)._runAction(this)},t.prototype.fulfilled=function(t){this.step(this.iterator.next,t.value)},t.prototype.rejected=function(t){return this.step(this.iterator["throw"],t.value),!0},t}(),Yt=function(){function t(e,r){n(this,t),this.f=e,this.c=r,this.promise=void 0,this.args=void 0}return t.prototype.merge=function(t,e){this.promise=t,this.args=e,Kt.add(this)},t.prototype.run=function(){try{this.promise._resolve(this.f.apply(this.c,this.args))}catch(t){this.promise._reject(t)}},t}(),Zt=[],$t=function(t){function r(e){n(this,r),t.call(this),st(tt,e,void 0,Zt,this)}return e(r,t),r}(Dt);$t.resolve=K,$t.reject=V,$t.all=q,$t.race=z,"function"!=typeof Promise&&mt(),t.resolve=K,t.reject=V,t.future=F,t.never=W,t.fulfill=D,t.all=q,t.race=z,t.isFulfilled=o,t.isRejected=i,t.isSettled=u,t.isPending=r,t.isNever=c,t.getValue=f,t.getReason=p,t.coroutine=rt,t.fromNode=it,t.runNode=ut,t.runPromise=ct,t.delay=ft,t.timeout=pt,t.any=ht,t.settle=at,t.merge=lt,t.shim=mt,t.Promise=$t});