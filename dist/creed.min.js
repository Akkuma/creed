!function(t,n){if("function"==typeof define&&define.amd)define("creed",["exports"],n);else if("undefined"!=typeof exports)n(exports);else{var e={exports:{}};n(e.exports),t.creed=e.exports}}(this,function(t){"use strict";function n(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t){return(t.state()&wt)>0}function o(t){return(t.state()&gt)>0}function i(t){return(t.state()&bt)>0}function u(t){return(t.state()&jt)>0}function c(t){return(t.state()&At)>0}function s(t){return(t.state()&kt)>0}function f(t){var n=t.near();if(!o(n))throw new TypeError("getValue called on "+t);return n.value}function p(t){var n=t.near();if(!i(n))throw new TypeError("getReason called on "+t);return a(n),n.value}function h(t){t._runAction(Tt)}function a(t){t._state|=kt}function l(t){return Et?v(t):Pt?m(t):y(t)}function y(t){return function(){return setTimeout(t,0)}}function v(t){return function(){return process.nextTick(t)}}function m(t){var n=document.createTextNode("");new Pt(t).observe(n,{characterData:!0});var e=0;return function(){return n.data=e^=1}}function d(){return Et&&"function"==typeof process.emit?function(t,n){return t===Rt?process.emit(t,n.value,n):process.emit(t,n)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(t,n,e){var r;try{r=new e(Rt)instanceof e}catch(o){r=!1}return r?function(t,r){var o=new e(t,{detail:{reason:r.value,promise:r},bubbles:!1,cancelable:!0});return!n.dispatchEvent(o)}:t}(_,self,CustomEvent):_}function _(){}function w(t,n){try{g(n,t)}finally{n.length=0}}function g(t,n){for(var e=0;e<t.length;++e){var r=t[e];s(r)||n(r)}}function b(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function j(t,n,e){return k(T,t,n,e)}function A(t,n,e){return k(E,t,n,e)}function k(t,n,e,r){return e._when(new Nt(t,n,r)),r}function T(t,n,e){e._fulfill(t(n))}function E(t,n,e){var r=t(n);b(r)&&"function"==typeof r.then?e._resolve(r):e._reject(new TypeError("f must return a promise"))}function P(t,n,e,r){return e._when(new Ct(t,n,r)),r}function x(t,n,e){return"function"!=typeof t?(e._become(n),!1):(R(t,n.value,e),!0)}function R(t,n,e){try{e._resolve(t(n))}catch(r){e._reject(r)}}function S(t){return Array.isArray(t)?new Array(t.length):[]}function O(t,n,e,r){var o=Array.isArray(e)?M:N;try{o(t,n,e,r)}catch(i){r._reject(i)}return r.near()}function M(t,n,e,r){for(var o=0;o<e.length;++o)C(t,n,e[o],o,r);n.complete(o,r)}function N(t,n,e,r){var o=0,i=!0,u=!1,c=void 0;try{for(var s,f=e[Symbol.iterator]();!(i=(s=f.next()).done);i=!0){var p=s.value;C(t,n,p,o++,r)}}catch(h){u=!0,c=h}finally{try{!i&&f["return"]&&f["return"]()}finally{if(u)throw c}}n.complete(o,r)}function C(t,n,e,r,u){if(!b(e))return void n.valueAt(e,r,u);var c=t(e);u._isResolved()?o(c)||h(c):o(c)?n.fulfillAt(c,r,u):i(c)?n.rejectAt(c,r,u):H(c,n,r,u)}function H(t,n,e,r){t._runAction({handler:n,i:e,promise:r,fulfilled:K,rejected:V})}function K(t){this.handler.fulfillAt(t,this.i,this.promise)}function V(t){return this.handler.rejectAt(t,this.i,this.promise)}function W(t){return L(t)?t.near():b(t)?U(q,t):new qt(t)}function D(t){return new zt(t)}function F(){return new Bt}function q(t){return new qt(t)}function z(){var t=new Ft;return{resolve:function(n){return t._resolve(n)},promise:t}}function B(t){var n=new Ht(Gt,S(t));return J(n,t)}function G(t){return J(new Kt(F),t)}function I(t){return"object"==typeof t&&null!==t}function J(t,n){if(!I(n))return D(new TypeError("expected an iterable"));var e=new Ft;return O(Q,t,n,e)}function L(t){return t instanceof Dt}function Q(t){return L(t)?t.near():U(q,t)}function U(t,n){try{var e=n.then;return"function"==typeof e?X(e,n):t(n)}catch(r){return new zt(r)}}function X(t,n){var e=new Ft;try{t.call(n,function(t){return e._resolve(t)},function(t){return e._reject(t)})}catch(r){e._reject(r)}return e.near()}function Y(){return new zt(new TypeError("resolution cycle"))}function Z(t,n,e){return new Jt(t,n,e).run(),e}function $(t,n,e,r){function o(t,n){t?r._reject(t):r._fulfill(n)}switch(e.length){case 0:t.call(n,o);break;case 1:t.call(n,e[0],o);break;case 2:t.call(n,e[0],e[1],o);break;case 3:t.call(n,e[0],e[1],e[2],o);break;default:e.push(o),t.apply(n,e)}return r}function tt(t,n,e,r){function o(t){r._resolve(t)}function i(t){r._reject(t)}switch(e.length){case 0:t.call(n,o,i);break;case 1:t.call(n,e[0],o,i);break;case 2:t.call(n,e[0],e[1],o,i);break;case 3:t.call(n,e[0],e[1],e[2],o,i);break;default:e.push(o,i),t.apply(n,e)}return r}function nt(t,n,e){return n._runAction(new Lt(t,e)),e}function et(t,n){n._become(t)}function rt(t,n,e){var r=setTimeout(ot,t,e);return n._runAction(new Ut(r,e)),e}function ot(t){t._reject(new Qt("promise timeout"))}function it(t){return function(){for(var n=arguments.length,e=Array(n),r=0;n>r;r++)e[r]=arguments[r];return ut(t,this,e)}}function ut(t,n,e){var r=t.apply(n,e);return Z(W,r,new Ft)}function ct(t){return function(){for(var n=arguments.length,e=Array(n),r=0;n>r;r++)e[r]=arguments[r];return pt($,t,this,e,new Ft)}}function st(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;n>r;r++)e[r-1]=arguments[r];return pt($,t,this,e,new Ft)}function ft(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;n>r;r++)e[r-1]=arguments[r];return pt(tt,t,this,e,new Ft)}function pt(t,n,e,r,o){dt(n);try{t(n,e,r,o)}catch(i){o._reject(i)}return o}function ht(t,n){var e=W(n);return 0>=t||i(e)||c(e)?e:nt(t,e,new Ft)}function at(t,n){var e=W(n);return u(e)?e:rt(t,e,new Ft)}function lt(t){return J(new Xt,t)}function yt(t){var n=new Yt(W,S(t));return J(n,t)}function vt(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;n>r;r++)e[r-1]=arguments[r];return mt(t,this,e)}function mt(t,n,e){var r=new Ht(new Zt(t,n),S(e));return J(r,e)}function dt(t){if("function"!=typeof t)throw new TypeError("must provide a resolver function")}function _t(){var t="function"==typeof Promise&&Promise;return"undefined"!=typeof self?self.Promise=tn:"undefined"!=typeof global&&(global.Promise=tn),t}Object.defineProperty(t,"__esModule",{value:!0});var wt=1,gt=2,bt=4,jt=gt|bt,At=8,kt=16,Tt={fulfilled:function(){},rejected:a},Et="undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process),Pt="function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver,xt=function(){function t(){var n=this;e(this,t),this.tasks=new Array(65536),this.length=0,this.drain=l(function(){return n._drain()})}return t.prototype.add=function(t){0===this.length&&this.drain(),this.tasks[this.length++]=t},t.prototype._drain=function(){for(var t=this.tasks,n=0;n<this.length;++n)t[n].run(),t[n]=void 0;this.length=0},t}(),Rt="unhandledRejection",St="unhandledRejection",Ot="rejectionHandled",Mt=function(){function t(n,r){e(this,t),this.errors=[],this.emit=n,this.reportError=r}return t.prototype.track=function(t){this.emit(St,t,t.value)||(0===this.errors.length&&setTimeout(w,1,this.reportError,this.errors),this.errors.push(t))},t.prototype.untrack=function(t){h(t),this.emit(Ot,t)},t}(),Nt=function(){function t(n,r,o){e(this,t),this.apply=n,this.f=r,this.promise=o}return t.prototype.fulfilled=function(t){try{this.apply(this.f,t.value,this.promise)}catch(n){this.promise._reject(n)}},t.prototype.rejected=function(t){this.promise._become(t)},t}(),Ct=function(){function t(n,r,o){e(this,t),this.f=n,this.r=r,this.promise=o}return t.prototype.fulfilled=function(t){x(this.f,t,this.promise)},t.prototype.rejected=function(t){return x(this.r,t,this.promise)},t}(),Ht=function(){function t(n,r){e(this,t),this.pending=0,this.results=r,this.mergeHandler=n}return t.prototype.valueAt=function(t,n,e){this.results[n]=t,this.check(this.pending-1,e)},t.prototype.fulfillAt=function(t,n,e){this.valueAt(t.value,n,e)},t.prototype.rejectAt=function(t,n,e){e._become(t)},t.prototype.complete=function(t,n){this.check(this.pending+t,n)},t.prototype.check=function(t,n){this.pending=t,0===t&&this.mergeHandler.merge(n,this.results)},t}(),Kt=function(){function t(n){e(this,t),this.never=n}return t.prototype.valueAt=function(t,n,e){e._fulfill(t)},t.prototype.fulfillAt=function(t,n,e){e._become(t)},t.prototype.rejectAt=function(t,n,e){e._become(t)},t.prototype.complete=function(t,n){0===t&&n._become(this.never())},t}(),Vt=new xt,Wt=new Mt(d(),function(t){throw t.value}),Dt=function(){function t(){e(this,t)}return t.empty=function(){return F()},t.of=function(t){return q(t)},t}(),Ft=function(t){function r(){e(this,r),t.call(this),this.ref=void 0,this.action=void 0,this.length=0}return n(r,t),r.prototype.then=function(t,n){var e=this.near();return e===this?P(t,n,e,new r):e.then(t,n)},r.prototype["catch"]=function(t){var n=this.near();return n===this?P(void 0,t,n,new r):n["catch"](t)},r.prototype.map=function(t){var n=this.near();return n===this?j(t,n,new r):n.map(t)},r.prototype.ap=function(t){var n=this.near(),e=t.near();return n===this?this.chain(function(t){return e.map(t)}):n.ap(e)},r.prototype.chain=function(t){var n=this.near();return n===this?A(t,n,new r):n.chain(t)},r.prototype.concat=function(t){var n=this.near(),e=t.near();return n!==this?n.concat(e):c(e)?n:u(e)?e:G([n,e])},r.prototype.toString=function(){return"[object "+this.inspect()+"]"},r.prototype.inspect=function(){var t=this.near();return t===this?"Promise { pending }":t.inspect()},r.prototype.near=function(){return this._isResolved()?(this.ref=this.ref.near(),this.ref):this},r.prototype.state=function(){return this._isResolved()?this.ref.near().state():wt},r.prototype._isResolved=function(){return void 0!==this.ref},r.prototype._when=function(t){this._runAction(t)},r.prototype._runAction=function(t){void 0===this.action?this.action=t:this[this.length++]=t},r.prototype._resolve=function(t){function n(n){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}(function(t){this._become(W(t))}),r.prototype._fulfill=function(t){this._become(new qt(t))},r.prototype._reject=function(t){this._isResolved()||this.__become(new zt(t))},r.prototype._become=function(t){this._isResolved()||this.__become(t)},r.prototype.__become=function(t){this.ref=t===this?Y():t,Vt.add(this)},r.prototype.run=function(){if(void 0!==this.action){var t=this.ref.near();t._runAction(this.action),this.action=void 0;for(var n=0;n<this.length;++n)t._runAction(this[n]),this[n]=void 0}},r}(Dt),qt=function(t){function r(n){e(this,r),t.call(this),this.value=n}return n(r,t),r.prototype.then=function(t){return"function"==typeof t?P(t,void 0,this,new Ft):this},r.prototype["catch"]=function(){return this},r.prototype.map=function(t){return j(t,this,new Ft)},r.prototype.ap=function(t){return t.map(this.value)},r.prototype.chain=function(t){return A(t,this,new Ft)},r.prototype.concat=function(){return this},r.prototype.toString=function(){return"[object "+this.inspect()+"]"},r.prototype.inspect=function(){return"Promise { fulfilled: "+this.value+" }"},r.prototype.state=function(){return gt},r.prototype.near=function(){return this},r.prototype._when=function(t){Vt.add(new It(t,this))},r.prototype._runAction=function(t){t.fulfilled(this)},r}(Dt),zt=function(t){function r(n){e(this,r),t.call(this),this.value=n,this._state=bt,Wt.track(this)}return n(r,t),r.prototype.then=function(t,n){return"function"==typeof n?this["catch"](n):this},r.prototype["catch"]=function(t){return P(void 0,t,this,new Ft)},r.prototype.map=function(){return this},r.prototype.ap=function(){return this},r.prototype.chain=function(){return this},r.prototype.concat=function(){return this},r.prototype.toString=function(){return"[object "+this.inspect()+"]"},r.prototype.inspect=function(){return"Promise { rejected: "+this.value+" }"},r.prototype.state=function(){return this._state},r.prototype.near=function(){return this},r.prototype._when=function(t){Vt.add(new It(t,this))},r.prototype._runAction=function(t){t.rejected(this)&&Wt.untrack(this)},r}(Dt),Bt=function(t){function r(){e(this,r),t.apply(this,arguments)}return n(r,t),r.prototype.then=function(){return this},r.prototype["catch"]=function(){return this},r.prototype.map=function(){return this},r.prototype.ap=function(){return this},r.prototype.chain=function(){return this},r.prototype.concat=function(t){return t},r.prototype.toString=function(){return"[object "+this.inspect()+"]"},r.prototype.inspect=function(){return"Promise { never }"},r.prototype.state=function(){return wt|At},r.prototype.near=function(){return this},r.prototype._when=function(){},r.prototype._runAction=function(){},r}(Dt),Gt={merge:function(t,n){t._fulfill(n)}},It=function(){function t(n,r){e(this,t),this.action=n,this.promise=r}return t.prototype.run=function(){this.promise._runAction(this.action)},t}(),Jt=function(){function t(n,r,o){e(this,t),this.resolve=n,this.iterator=r,this.promise=o}return t.prototype.run=function(){this.step(this.iterator.next,void 0)},t.prototype.step=function(t,n){try{this.handle(t.call(this.iterator,n))}catch(e){this.promise._reject(e)}},t.prototype.handle=function(t){return t.done?this.promise._resolve(t.value):void this.resolve(t.value)._runAction(this)},t.prototype.fulfilled=function(t){this.step(this.iterator.next,t.value)},t.prototype.rejected=function(t){return this.step(this.iterator["throw"],t.value),!0},t}(),Lt=function(){function t(n,r){e(this,t),this.time=n,this.promise=r}return t.prototype.fulfilled=function(t){setTimeout(et,this.time,t,this.promise)},t.prototype.rejected=function(t){this.promise._become(t)},t}(),Qt=function(t){function r(n){e(this,r),t.call(this),this.message=n,this.name=r.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}return n(r,t),r}(Error),Ut=function(){function t(n,r){e(this,t),this.timer=n,this.promise=r}return t.prototype.fulfilled=function(t){clearTimeout(this.timer),this.promise._become(t)},t.prototype.rejected=function(t){return clearTimeout(this.timer),this.promise._become(t),!1},t}(),Xt=function(){function t(){e(this,t),this.pending=0}return t.prototype.valueAt=function(t,n,e){e._fulfill(t)},t.prototype.fulfillAt=function(t,n,e){e._become(t)},t.prototype.rejectAt=function(t,n,e){h(t),this.check(this.pending-1,e)},t.prototype.complete=function(t,n){this.check(this.pending+t,n)},t.prototype.check=function(t,n){this.pending=t,0===t&&n._reject(new RangeError("No fulfilled promises in input"))},t}(),Yt=function(){function t(n,r){e(this,t),this.pending=0,this.results=r,this.resolve=n}return t.prototype.valueAt=function(t,n,e){this.settleAt(this.resolve(t),n,e)},t.prototype.fulfillAt=function(t,n,e){this.settleAt(t,n,e)},t.prototype.rejectAt=function(t,n,e){h(t),this.settleAt(t,n,e)},t.prototype.settleAt=function(t,n,e){this.results[n]=t,this.check(this.pending-1,e)},t.prototype.complete=function(t,n){this.check(this.pending+t,n)},t.prototype.check=function(t,n){this.pending=t,0===t&&n._fulfill(this.results)},t}(),Zt=function(){function t(n,r){e(this,t),this.f=n,this.c=r,this.promise=void 0,this.args=void 0}return t.prototype.merge=function(t,n){this.promise=t,this.args=n,Vt.add(this)},t.prototype.run=function(){try{this.promise._resolve(this.f.apply(this.c,this.args))}catch(t){this.promise._reject(t)}},t}(),$t=[],tn=function(t){function r(n){e(this,r),t.call(this),pt(tt,n,void 0,$t,this)}return n(r,t),r}(Ft);tn.resolve=W,tn.reject=D,tn.all=B,tn.race=G,"function"!=typeof Promise&&_t(),t.resolve=W,t.reject=D,t.future=z,t.never=F,t.fulfill=q,t.all=B,t.race=G,t.isFulfilled=o,t.isRejected=i,t.isSettled=u,t.isPending=r,t.isNever=c,t.getValue=f,t.getReason=p,t.coroutine=it,t.fromNode=ct,t.runNode=st,t.runPromise=ft,t.delay=ht,t.timeout=at,t.any=lt,t.settle=yt,t.merge=vt,t.shim=_t,t.Promise=tn});